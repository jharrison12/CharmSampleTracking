{% extends "biospecimen/base.html" %}
{% block header %}Charm ID : {{ charm_project_identifier }}{% endblock %}
{% block section %}
    <div class="row" id="biospecimen_information">
    <div class="col-sm">ID: {{ caregiver_bio.biospecimen_id }}</div>
    <div class="col-sm">Type: {{ caregiver_bio.collection_fk.collection_type_fk.collection_type }}</div>
    {#  Not sure what the below object was in the SRO version of this device    #}
    <div class="col-sm">Log Status: {{ biospecimen_item }}</div>
    {% if caregiver_bio.trimester_fk %}<div class="col-sm">Trimester: {{ caregiver_bio.trimester_fk.get_trimester_display }}</div>{% endif %}
        <hr/>
    </div>
    {% if caregiver_bio.status_fk.not_collected_fk%}
        <div id="not_collected_information" class="row border border-primary p-3 rounded">
        Not Collected
        </div>
    {% elif caregiver_bio.status_fk.no_consent_fk %}
        <div id="no_consent_information" class="row border border-primary p-3 rounded">
        No Consent
        </div>
    {#  Potential bug because collected date time is not required but you have to null it to create it        #}
    {% elif caregiver_bio.status_fk and caregiver_bio.status_fk.collected_fk and not caregiver_bio.status_fk.collected_fk.collected_date_time %}
        <div id="collected_information_form" class="row border border-primary p-3 rounded">
          <form method="POST" action={% url 'biospecimen:caregiver_biospecimen_post' charm_project_identifier caregiver_bio_pk %}>
          {% csrf_token %}
              <h2>Collected Form</h2>
            {{ collected_form.as_p }}
          <input type="submit" value="Submit" />
          </form>
        </div>
    {% elif caregiver_bio.status_fk.collected_fk  %}
        <div id="collected_information" class="row border border-primary p-3 rounded">
            <div class="col-4">
                {# TODO ADD FILTER TAG  #}
                {#       https://stackoverflow.com/questions/6571649/model-name-of-objects-in-django-templates         #}
                <button type="button" class="btn btn-primary" disabled aria-disabled="true">Collected</button>
            </div>
            <div class="col-8">
                <div>Collected Date Time:{{ caregiver_bio.status_fk.collected_fk.collected_date_time }}</div>
                <div>Processed Date Time:{{ caregiver_bio.status_fk.collected_fk.processed_date_time}}</div>
                <div>Stored Date Time:{{ caregiver_bio.status_fk.collected_fk.stored_date_time  }}</div>
                <div>Number of Tubes: {{ caregiver_bio.status_fk.collected_fk.number_of_tubes }}</div>
                <div>Logged By:BLANK</div>
            </div>
        </div>
    {% else %}
    {% endif %}
    {% if caregiver_bio.status_fk.collected_fk.collected_date_time and not caregiver_bio.status_fk.shipped_echo_fk and not caregiver_bio.status_fk.shipped_wsu_fk  %}
        <div id="shipped_choice" class="row border border-primary p-3 rounded">
          <form method="POST" action={% url 'biospecimen:caregiver_shipped_choice_post' charm_project_identifier caregiver_bio_pk %}>
          {% csrf_token %}
              <h2>Shipped Choice Form</h2>
            {{ shipped_choice_form.as_p }}
          <input type="submit" value="Submit" />
          </form>
        </div>
    {% elif caregiver_bio.status_fk.collected_fk.collected_date_time and caregiver_bio.status_fk.shipped_wsu_fk and not caregiver_bio.status_fk.shipped_wsu_fk.shipped_date_time  %}
        <div id="shipped_to_wsu_information_form" class="row border border-primary p-3 rounded">
          <form method="POST" action={% url 'biospecimen:caregiver_biospecimen_shipped_wsu_post' charm_project_identifier caregiver_bio_pk %}>
          {% csrf_token %}
              <h2>Shipped to WSU Form</h2>
            {{ shipped_wsu_form.as_p }}
          <input type="submit" value="Submit" />
          </form>
        </div>
    {% elif caregiver_bio.status_fk.collected_fk.collected_date_time and caregiver_bio.status_fk.shipped_wsu_fk and caregiver_bio.status_fk.shipped_wsu_fk.shipped_date_time %}
        <div id="shipped_to_wsu_information" class="row border border-primary p-3 rounded">
            <div class="col-4">
                {# TODO ADD FILTER TAG  #}
                {#       https://stackoverflow.com/questions/6571649/model-name-of-objects-in-django-templates         #}
                <button type="button" class="btn btn-primary" disabled aria-disabled="true">Shipped WSU</button>
            </div>
            <div class="col-8">
                <div>Shipped Date Time:{{ caregiver_bio.status_fk.shipped_wsu_fk.shipped_date_time }}</div>
                <div>Courier: {{ caregiver_bio.status_fk.shipped_wsu_fk.courier }}</div>
                <div>Tracking Number:{{ caregiver_bio.status_fk.shipped_wsu_fk.tracking_number }}</div>
                <div>Number of Tubes: {{ caregiver_bio.status_fk.shipped_wsu_fk.number_of_tubes }}</div>
                <div>Shipped By: {{ caregiver_bio.status_fk.shipped_wsu_fk.shipped_by }}</div>
            </div>
        </div>
    {% endif %}
    {% if caregiver_bio.status_fk.collected_fk.collected_date_time and caregiver_bio.status_fk.shipped_echo_fk and not caregiver_bio.status_fk.shipped_echo_fk.shipped_date_time %}
        <div id="shipped_to_echo_form" class="row border border-primary p-3 rounded">
          <form method="POST" action={% url 'biospecimen:caregiver_biospecimen_shipped_echo_post' charm_project_identifier caregiver_bio_pk %}>
          {% csrf_token %}
              <h2>Shipped to ECHO Form</h2>
                {{ shipped_echo_form.as_p }}
          <input type="submit" value="Submit" />
          </form>
        </div>
    {% elif caregiver_bio.status_fk.collected_fk.collected_date_time and caregiver_bio.status_fk.shipped_echo_fk and caregiver_bio.status_fk.shipped_echo_fk.shipped_date_time %}
        <div id="shipped_to_echo_information" class="row border border-primary p-3 rounded">
            <div class="col-4">
                {# TODO ADD FILTER TAG  #}
                {#       https://stackoverflow.com/questions/6571649/model-name-of-objects-in-django-templates         #}
                <button type="button" class="btn btn-primary" disabled aria-disabled="true">Shipped Echo</button>
            </div>
            <div class="col-8">
                <div>Shipped Date Time: {{ caregiver_bio.status_fk.shipped_echo_fk.shipped_date_time }}</div>
            </div>
        </div>

    {% endif %}
{% endblock %}